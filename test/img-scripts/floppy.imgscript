# Create a floppy disk image in the temporary items folder called floppy.img
# Set some variables that will contain the values to work with. These will only
# be set if no equivalent environment variable was provided.
setu bps 512
setu sector-count 2880
setu file-system fat12
setu img-path "/tmp/floppy.img"

# Attach the disk image and initialise it. We're not concerned if we're
# replacing it here.
attach $img-path
init $bps $sector-count

# Now that we have a disk image attached and initialised, format it with the
# specified file system
format $file-system

# Finally we want to mount it and touch a file and directory into it.
mount
touch test.txt
mkdir test

# Finish by unmounting and exiting.
unmount
exit
